<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Trắc nghiệm Tin Học Lớp 4</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; display: flex; height: 100vh; }
    #history { width: 25%; background: #f3f3f3; padding: 10px; overflow-y: auto; border-right: 1px solid #ccc; }
    #quiz { flex: 1; padding: 20px; overflow-y: auto; }
    .question { margin-bottom: 20px; }
    .answers button { display: block; margin: 5px 0; width: 100%; padding: 8px; cursor: pointer; }
    .answers button.selected { background-color: #d0ebff; border: 2px solid #339af0; }
    .correct { color: green; }
    .wrong { color: red; }
  </style>
</head>
<body>

<div id="history">
  <h3>Lịch sử làm bài</h3>
  <ul id="historyList"></ul>
</div>

<div id="quiz">
  <h2>Đề trắc nghiệm Tin Học lớp 4</h2>
  <div id="questionBox"></div>
  <button onclick="submitQuiz()">Nộp bài</button>
  <p id="score"></p>
</div>

<script>
const questions = [
  {
    q: "Câu 1: Phần cứng máy tính là thành phần nào sau đây?",
    answers: [
      "Word, PowerPoint, micro",
      "Bộ vi xử lí CPU, RAM, bộ nguồn",
      "Google, Cốc Cốc, bàn phím",
      "Paint, Scratch 3, Chat GPT"
    ],
    correct: 1
  },
  {
    q: "Câu 2: Phần mềm máy tính là thành phần nào sau đây?",
    answers: [
      "Màn hình, webcam",
      "Bộ vi xử lí CPU",
      "Google, PowerPoint",
      "Màn hình, tai nghe"
    ],
    correct: 2
  },
  {
    q: "Câu 3: Văn bản chứa các loại thông tin văn bản, hình ảnh, âm thanh, video và siêu liên kết gọi là gì?",
    answers: [
      "Siêu văn bản",
      "Siêu âm thanh",
      "Trang web",
      "Siêu hình ảnh"
    ],
    correct: 0
  },
  {
    q: "Câu 4: Tác hại khi xem các trang web có các trò chơi, phim, ảnh bạo lực?",
    answers: [
      "Em sẽ bị lôi cuốn và vô tình làm theo những hành vi không đúng mực với mọi người",
      "Em đã thực hiện hành vi sai trái và máy tính của em có nguy cơ bị nhiễm virus độc hại",
      "Em có thể bị bắt nạt trực tuyến hoặc bị lừa đảo dẫn đến mất tiền bạc",
      "Em có thể học hỏi và trải nghiệm thêm nhiều trò chơi bắn súng mới lạ"
    ],
    correct: 0
  },
  {
    q: "Câu 5: Để đổi tên một thư mục, em dùng lệnh nào sau đây?",
    answers: ["Delete", "Copy", "Rename", "Cut"],
    correct: 2
  },
  {
    q: "Câu 6: Để di chuyển một thư mục, em dùng lệnh nào sau đây?",
    answers: ["Copy", "Rename", "Cut", "Delete"],
    correct: 2
  },
  {
    q: "Câu 7: Để tạo một thư mục, em dùng lệnh nào sau đây?",
    answers: ["New folder", "New slide", "New", "New Layout"],
    correct: 0
  },
  {
    q: "Câu 8: Phần mềm miễn phí là gì?",
    answers: [
      "Phần mềm phải mất phí khi sử dụng",
      "Phần mềm thu phí theo tháng",
      "Phần mềm không phải trả phí khi sử dụng",
      "Phần mềm dùng thu phí theo năm"
    ],
    correct: 2
  },
  {
    q: "Câu 9: Khi di chuyển một thư mục đến vị trí khác thì tất cả tệp và thư mục con trong thư mục đó sẽ như thế nào?",
    answers: [
      "Tồn tại ở cả vị trí mới và vị trí cũ",
      "Chỉ tồn tại ở vị trí cũ",
      "Chỉ tồn tại ở vị trí mới",
      "Bị xóa đi không còn tồn tại"
    ],
    correct: 2
  },
  {
    q: "Câu 10: Khi em muốn tệp và thư mục tồn tại ở thư mục cũ và thư mục mới em sử dụng một thao tác nào?",
    answers: ["Sao chép", "Di chuyển", "Xóa", "Đổi tên"],
    correct: 0
  }
];

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

let shuffledQuestions = [];

function loadQuiz() {
  shuffledQuestions = shuffle([...questions]).map(q => {
    const ans = q.answers.map((a, i) => ({ text: a, index: i }));
    return { ...q, shuffledAns: shuffle(ans) };
  });

  const box = document.getElementById("questionBox");
  box.innerHTML = "";

  shuffledQuestions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<b>Câu ${i+1}:</b> ${q.q}`;

    const ansDiv = document.createElement("div");
    ansDiv.className = "answers";

    q.shuffledAns.forEach(a => {
      const btn = document.createElement("button");
      btn.textContent = a.text;
      btn.dataset.index = a.index;
      btn.onclick = () => {
        ansDiv.querySelectorAll("button").forEach(b => {
          b.classList.remove("selected");
          delete b.dataset.selected;
        });
        btn.classList.add("selected");
        btn.dataset.selected = "true";
      };
      ansDiv.appendChild(btn);
    });

    div.appendChild(ansDiv);
    box.appendChild(div);
  });
}

function submitQuiz() {
  let score = 0;
  document.querySelectorAll(".question").forEach((div, i) => {
    div.querySelectorAll("button").forEach(btn => {
      if (btn.dataset.selected === "true") {
        if (parseInt(btn.dataset.index) === shuffledQuestions[i].correct) {
          score++;
          btn.classList.add("correct");
        } else {
          btn.classList.add("wrong");
        }
      }
    });
  });

  document.getElementById("score").textContent = `Điểm: ${score}/${shuffledQuestions.length}`;
  const li = document.createElement("li");
  li.textContent = `Lần ${document.querySelectorAll("#historyList li").length + 1}: ${score}/${shuffledQuestions.length}`;
  document.getElementById("historyList").appendChild(li);
}

loadQuiz();
</script>
</body>
</html>
